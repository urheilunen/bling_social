{% extends "layout/basic.html" %}

{% block content %}
{% if user.is_authenticated %}
    <br><form method="post" align="center">{% csrf_token %}
        <input type="text" name="new_post" placeholder="–ß—Ç–æ —É –≤–∞—Å –Ω–æ–≤–æ–≥–æ?">
        <button name="post_id" type="submit" value="{{ blingpost.pk }}">–ó–∞–ø–æ—Å—Ç–∏—Ç—å</button>
    </form>
    {% if blingposts.0 %}
        {% for blingpost in blingposts %}
            <div class="post">
                <h3><a href="{% url 'user_profile' blingpost.author.username %}">{{ blingpost.author.profile }}</a> —Å–¥–µ–ª–∞–ª –ø–æ—Å—Ç:</h3>
                <p>{{ blingpost.text }}</p><br>
                {% if blingpost.images != None %}
                    <img src="{{ MEDIA_ROOT }}{{ blingpost.images.image.url }}" width="200px">
                {% endif %}

                <!-- likes & comments block -->
                <h4 class="PostDate">
                        üïô {{ blingpost.how_old }}
                    <form method="post">{% csrf_token %}
                        <button name="like" type="submit" value="{{ blingpost.pk }}">–ù—Ä–∞–≤–∏—Ç—Å—è({{ blingpost.likes_amount }})</button>
                    </form>
                    –ö–æ–º–µ–Ω—Ç–∞—Ä–∏–µ–≤: {{ blingpost.comments_amount }}
                    {% if blingpost.comments_amount > 0 %}
                        {% for comment in blingpost.comments.all %}
                            <br><a href="{% url 'user_profile' comment.author.username %}">{{ comment.author.profile }}</a>: {{ comment }} ({{ comment.how_old }})
                        {% endfor %}
                    {% endif %}
                    <form method="post">{% csrf_token %}
                        <input type="text" name="comment_text" placeholder="–ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å...">
                        <button name="post_id" type="submit" value="{{ blingpost.pk }}">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    </form>
                </h4>
            </div><br>
        {% endfor %}
    {% else %}
        <p align="center">–¢—É—Ç –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤...</p>
    {% endif %}
{% endif %}
{% endblock %}