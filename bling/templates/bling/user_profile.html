{% extends "layout/basic.html" %}

{% block title %} {{ blinguser.username }} {% endblock %}

{% block content %}

<!--now rendering this user's name-->
{% if blinguser.first_name or blinguser.lastname %}
        <h1>{{ blinguser.first_name }} {{ blinguser.last_name }}</h1>
    {% else %}
        <h1>{{ blinguser.username }}</h1>
    {% endif %}

<!--now rendering subscribe/unsubscribe button--><br>
<a style="background-color: #7777ff;" {% if not is_own_page %}
    {% if is_current_user_subscribed %}
        title="–û—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É" href="{% url 'unsubscribe' blinguser.username %}">–í—ã –ø–æ–¥–ø–∏—Å–∞–Ω—ã
    {% elif is_current_user_friend %}
        title="–£–¥–∞–ª–∏—Ç—å –∏–∑ –¥—Ä—É–∑–µ–π" href="{% url 'unsubscribe' blinguser.username %}">–í—ã –¥—Ä—É–∑—å—è
    {% elif is_profile_user_subscribed %}
        title="–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –≤ –æ—Ç–≤–µ—Ç" href="{% url 'subscribe' blinguser.username %}">–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è
    {% else %}
        title="–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è" href="{% url 'subscribe' blinguser.username %}">–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è
    {% endif %}
{% endif %}
</a>
<!--subs/friends block-->
<div style="border: 1px solid black; position: relative; width: 500px; background-color: #7777ff;">
    –î—Ä—É–∑—å—è: {{ friends_amount }}
    {% if friends_amount > 0 %}
        {% for friend in friends %}
            <br><a href="{% url 'user_profile' friend.username %}">{{ friend.profile }}</a>
        {% endfor %}
    {% endif %}
</div>
<div style="border: 1px solid black; position: relative; width: 500px; background-color: #7777ff;">
    –ü–æ–¥–ø–∏—Å—á–∏–∫–∏: {{ subs_amount }}
    {% if subs_amount > 0 %}
        {% for sub in subs %}
            <br><a href="{% url 'user_profile' sub.username %}">{{ sub.profile }}</a>
        {% endfor %}
    {% endif %}
</div>

<!--posts block-->
{% for blingpost in blingposts %}
            <div class="post">
                <h3><a href="{% url 'user_profile' blingpost.author.username %}">{{ blingpost.author.profile }}</a> —Å–¥–µ–ª–∞–ª –ø–æ—Å—Ç:</h3>
                <p>{{ blingpost.text }}</p><br>
                {% if blingpost.images != None %}
                    <img src="{{ MEDIA_ROOT }}{{ blingpost.images.image.url }}" width="200px">
                {% endif %}

                <!-- likes & comments block -->
                <h4 class="PostDate">
                        üïô {{ blingpost.how_old }}
                    <form method="post">{% csrf_token %}
                        <button name="like" type="submit" value="{{ blingpost.pk }}">–ù—Ä–∞–≤–∏—Ç—Å—è({{ blingpost.likes_amount }})</button>
                    </form>
                    –ö–æ–º–µ–Ω—Ç–∞—Ä–∏–µ–≤: {{ blingpost.comments_amount }}
                    {% if blingpost.comments_amount > 0 %}
                        {% for comment in blingpost.comments.all %}
                    <br><a href="{% url 'user_profile' comment.author.username %}">{{ comment.author.profile }}</a>: {{ comment }} ({{ comment.how_old }})
                        {% endfor %}
                    {% endif %}
                    <form method="post">{% csrf_token %}
                        <input type="text" name="comment_text" placeholder="–ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å...">
                        <button name="post_id" type="submit" value="{{ blingpost.pk }}">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    </form>
                </h4>

                <!-- author can delete their post -->
                {% if blinguser.username == user.username %}
                    <a href="{% url 'remove_post' blingpost.pk %}">–£–¥–∞–ª–∏—Ç—å</a>
                {% endif %}
            </div><br>
        {% endfor %}
</div><br>
{% endblock %}